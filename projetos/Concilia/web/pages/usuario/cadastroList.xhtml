<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="../../resources/templates/cadastro.xhtml">        

        <ui:define name="cadastro_titulo">
            #{bundle.FormCadastroUsuarios}            
        </ui:define>

        <ui:define name="cadastro_conteudo">

            <h:form id="form">

                <ui:decorate template="../../resources/templates/cadastroConteudo.xhtml">

                    <ui:define name="cadastro_toolbar">
                        <h:commandButton value="Inserir" title="#{bundle.CreateLink}" class="btn btn-primary navbar-btn" action="#{usuarioCadastro.criaNovo}"/>
                        <h:commandButton value="Excluir" title="#{bundle.DestroyLink}" class="btn btn-primary navbar-btn" actionListener="#{usuarioCadastro.exclui}"/>                                               
                    </ui:define>                    

                    <ui:define name="cadastro_conteudo">

                        <div class="table-responsive" style="overflow:auto; width:100%; max-height: 550px;">

                            <p:dataTable id="tabela" var="item" value="#{usuarioCadastro.lista}" tableStyleClass="table table-bordered table-hover"
                                         rowKey="#{item.idusuario}" emptyMessage="Nenhum registro encontrado." widgetVar="itemTable"
                                         selection="#{usuarioCadastro.itensSelecionados}" selectionMode="multiple">         

                                <f:facet name="header" >  
                                    <p:outputPanel>  
                                        <h:outputText value="Filtrar todos os campos: " />  
                                        <p:inputText id="globalFilter" onkeyup="itemTable.filter();" style="width:20%" />  
                                    </p:outputPanel>  
                                </f:facet>


                                <p:column sortBy="nome" headerText="#{bundle.ListUsuarioTitle_nome}" filterBy="nome">  
                                    <h:outputText value="#{item.nome}" />  
                                </p:column>  

                                <p:column sortBy="login" headerText="#{bundle.ListUsuarioTitle_login}" filterBy="login">  
                                    <h:outputText value="#{item.login}" />  
                                </p:column>  

                                <p:column sortBy="nivel" headerText="#{bundle.ListUsuarioTitle_nivel}" filterBy="nivel">  
                                    <h:outputText value="#{item.nivel}" />  
                                </p:column>  

                                <p:column style="width:2%">  
                                    <h:commandLink title="Editar" action="#{usuarioCadastro.edita(item)}" class="btn btn-toolbar btn-xs" >
                                        <span class="glyphicon glyphicon-pencil"></span>
                                    </h:commandLink>  
                                </p:column>  
                                
                            </p:dataTable>

                        </div> 

                    </ui:define>

                </ui:decorate>        


            </h:form>
        </ui:define>  

    </ui:composition>
    <script type="text/javascript">
                                            window.onload = function() {
                                                document.getElementById('form:tabela:globalFilter').focus();
                                            };
    </script>
</html>

