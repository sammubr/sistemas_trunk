<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="../../resources/templates/cadastro.xhtml">        

        <ui:define name="cadastro_titulo">
            #{bundle.FormCadastroUsuarios}            
        </ui:define>

        <ui:define name="cadastro_conteudo">

            <h:form id="form">

                <ui:decorate template="../../resources/templates/cadastroList.xhtml">

                    <ui:define name="cadastro_toolbar">
                        <h:commandLink value="Inserir" title="#{bundle.CreateLink}" class="btn btn-primary navbar-btn" action="#{usuarioCadastro.criaNovo}"/>
                        <h:commandLink value="Excluir" title="#{bundle.DestroyLink}" class="btn btn-primary navbar-btn" actionListener="#{usuarioCadastro.exclui}"/>


                    </ui:define> 

                    <ui:define name="cadastro_pesquisa">

                        <input  type="text" class="form-control" placeholder="Digite para filtrar" >
                            <f:ajax event="keypress" listener="#{usuarioCadastro.filtraGrid()}"/>
                        </input>

                    </ui:define>         

                    <ui:define name="cadastro_list">








                        <div class="table-responsive" style="overflow:auto; width:100%; max-height: 550px;" >

                            <p:dataTable id="tabela" var="item" value="#{usuarioCadastro.lista}" tableStyleClass="table table-bordered table-hover"
                                         rowKey="#{item.idusuario}"
                                         selection="#{usuarioCadastro.itensSelecionados}" selectionMode="multiple">         

                                <p:column >  
                                    <f:facet name="header">    
                                        <h:commandLink action="#{usuarioCadastro.sortByNome}" >
                                            <f:ajax render="tabela" />
                                            #{bundle.ListUsuarioTitle_nome}
                                        </h:commandLink>                                        
                                    </f:facet>
                                    <h:outputText value="#{item.nome}" />  
                                </p:column>  

                                <p:column >  
                                    <f:facet name="header">    
                                        <h:commandLink action="#{usuarioCadastro.sortByLogin}">
                                            <f:ajax render="tabela"  />
                                            #{bundle.ListUsuarioTitle_login}
                                        </h:commandLink>                                        
                                    </f:facet>
                                    <h:outputText value="#{item.login}" />  
                                </p:column>  

                                <p:column >  
                                    <f:facet name="header">    
                                        <h:commandLink action="#{usuarioCadastro.sortByNivel}"> 
                                            <f:ajax render="tabela" />
                                            #{bundle.ListUsuarioTitle_nivel}
                                        </h:commandLink>                                        
                                    </f:facet>
                                    <h:outputText value="#{item.nivel}" />  
                                </p:column>  

                                <p:column style="width:5%">  
                                    <h:commandLink title="Editar" action="#{usuarioCadastro.edita}" class="btn btn-default btn-sm" >
                                        <span class="glyphicon glyphicon-pencil"></span>
                                    </h:commandLink>  
                                </p:column>  
                            </p:dataTable>

                        </div> 


                    </ui:define>




                </ui:decorate>        


            </h:form>
        </ui:define>  

    </ui:composition>

    <style type="text/css">
        .highlighted {
            background-color: #eaf5fe;
        }
    </style>


    <script type="text/javascript">
        $('th').hover(function() {
            var t = parseInt($(this).index()) + 1;
            $('td:nth-child(' + t + ')').addClass('highlighted');
        },
                function() {
                    var t = parseInt($(this).index()) + 1;
                    $('td:nth-child(' + t + ')').removeClass('highlighted');
                });
    </script>

</html>

